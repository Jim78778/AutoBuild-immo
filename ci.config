# ==============================
# ci.config
# IPQ807x + NSS + QModem + Passwall(Xray, No Rust)
# ==============================

##### Target #####
CONFIG_TARGET_qualcommax=y
CONFIG_TARGET_qualcommax_ipq807x=y
CONFIG_TARGET_qualcommax_ipq807x_DEVICE_cpe_s10=y
CONFIG_TARGET_BOARD="qualcommax"
CONFIG_TARGET_SUBTARGET="ipq807x"

##### Kernel / Image #####
CONFIG_DEVEL=y
CONFIG_IMAGEOPT=y

##### Base System #####
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_busybox=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_firewall4=y
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_ipset=y
CONFIG_PACKAGE_kmod-nf-conntrack=y
CONFIG_PACKAGE_kmod-nf-nat=y
CONFIG_PACKAGE_kmod-nft-core=y
CONFIG_PACKAGE_kmod-nft-fib=y
CONFIG_PACKAGE_kmod-gpio-button-hotplug=y
CONFIG_PACKAGE_kmod-leds-gpio=y
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_mtd=y
CONFIG_PACKAGE_uci=y
CONFIG_PACKAGE_uclient-fetch=y

##### LuCI #####
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-bootstrap=y

##### Wireless #####
CONFIG_PACKAGE_wpad-openssl=y

##### ==============================
##### PCIe / MHI / WWAN (FULL)
##### ==============================
CONFIG_PACKAGE_kmod-mhi-bus=y
CONFIG_PACKAGE_kmod-mhi-pci-generic=y
CONFIG_PACKAGE_kmod-mhi-wwan-ctrl=y
CONFIG_PACKAGE_kmod-mhi-wwan-mbim=y
CONFIG_PACKAGE_kmod-wwan=y

##### QModem #####
CONFIG_PACKAGE_qmodem=y

##### Filesystem #####
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_mount-utils=y
CONFIG_PACKAGE_block-mount=y

##### ==============================
##### NSS / ECM (Stable)
##### ==============================
CONFIG_PACKAGE_kmod-qca-nss-drv=y
CONFIG_PACKAGE_kmod-qca-nss-ecm=y
CONFIG_NSS_DRV_IPV4_REASM=y
CONFIG_NSS_DRV_IPV6_REASM=y
# CONFIG_NSS_DRV_TRUSTSEC_ENABLE is not set
# CONFIG_NSS_DRV_GRE_ENABLE is not set
# CONFIG_NSS_DRV_VLAN_ENABLE is not set

##### ==============================
##### Passwall (UI only)
##### ==============================
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-app-passwall_Iptables_Transparent_Proxy=y

##### Xray (Go) #####
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_xray-geodata=y

##### ==============================
##### Disable Passwall Shadowsocks / Rust
##### ==============================
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Rust_Client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Rust_Server is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev_Client is not set
# CONFIG_PACKAGE_luci-app-passwall_INCLUDE_Shadowsocks_Libev_Server is not set

##### Disable Shadowsocks (Global) #####
# CONFIG_PACKAGE_shadowsocks-libev-ss-local is not set
# CONFIG_PACKAGE_shadowsocks-libev-ss-redir is not set
# CONFIG_PACKAGE_shadowsocks-libev-ss-server is not set
# CONFIG_PACKAGE_shadowsocks-libev-ss-tunnel is not set
# CONFIG_PACKAGE_shadowsocks-rust-sslocal is not set
# CONFIG_PACKAGE_shadowsocks-rust-ssserver is not set
# CONFIG_PACKAGE_shadowsocks-rust-ssmanager is not set
# CONFIG_PACKAGE_shadowsocks-rust-ssservice is not set
# CONFIG_PACKAGE_shadowsocks-rust-ssurl is not set
# CONFIG_PACKAGE_xray-plugin is not set
# CONFIG_PACKAGE_v2ray-plugin is not set

##### ==============================
##### Disable Rust (Root Kill)
##### ==============================
# CONFIG_RUST is not set
# CONFIG_RUST_TOOLCHAIN is not set
# CONFIG_RUST_SCCACHE is not set
# CONFIG_PACKAGE_rust is not set
# CONFIG_PACKAGE_cargo is not set

##### ==============================
##### Kernel non-interactive FIX (CRITICAL)
##### ==============================
CONFIG_KERNEL_NETFILTER=y
CONFIG_KERNEL_NETFILTER_INGRESS=y
CONFIG_KERNEL_NETFILTER_EGRESS=n

CONFIG_KERNEL_NETFILTER_NETLINK=m
# CONFIG_KERNEL_NETFILTER_NETLINK_HOOK is not set
# CONFIG_KERNEL_NETFILTER_NETLINK_ACCT is not set
# CONFIG_KERNEL_NETFILTER_NETLINK_QUEUE is not set
# CONFIG_KERNEL_NETFILTER_NETLINK_LOG is not set
# CONFIG_KERNEL_NETFILTER_NETLINK_OSF is not set

CONFIG_KERNEL_NF_CONNTRACK=m
CONFIG_KERNEL_NF_LOG_SYSLOG=m
CONFIG_KERNEL_NF_CONNTRACK_MARK=y
CONFIG_KERNEL_NF_CONNTRACK_ZONES=y
CONFIG_KERNEL_NF_CONNTRACK_PROCFS=y
CONFIG_KERNEL_NF_CONNTRACK_EVENTS=y
CONFIG_KERNEL_NF_CONNTRACK_TIMEOUT=y
# CONFIG_KERNEL_NF_CONNTRACK_DSCPREMARK_EXT is not set

##### ==============================
##### PCIe / MHI Kernel Core
##### ==============================
CONFIG_KERNEL_PCI=y
CONFIG_KERNEL_PCIEPORTBUS=y
CONFIG_KERNEL_MHI_BUS=y
CONFIG_KERNEL_MHI_NET=m
CONFIG_KERNEL_MHI_WWAN_CTRL=m
CONFIG_KERNEL_WWAN=y

##### ==============================
##### Build Safety
##### ==============================
# CONFIG_PACKAGE_kmod-keys-trusted is not set

# Disable HAProxy QUIC (fix OpenSSL 3.x build)
CONFIG_PACKAGE_haproxy=y
CONFIG_PACKAGE_haproxy-ssl=y
# CONFIG_PACKAGE_haproxy-quic is not set

# ECM RAWIP (rmnet) â€” disable, causes undefined symbols
# CONFIG_PACKAGE_qca-nss-ecm-rawip is not set

# ==============================
# END
# ==============================
